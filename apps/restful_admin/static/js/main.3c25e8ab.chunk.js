(this.webpackJsonpreact_app=this.webpackJsonpreact_app||[]).push([[0],{478:function(t,e){},549:function(t,e,n){"use strict";n.r(e);var a=n(33),r=(n(0),n(17)),c=n(624),o=n(611),s=n(631),i=n(623),u=n(625),d=n(626),l=n(618),j=n(619),b=n(629),p=n(627),f=n(637),h=n(630),O=n(633),m=n(628),x=n(184),v=n(609),g=n(620),w=n(621),k=n(294),y=n.n(k),P=n(154),T=n(48),E=n.n(T),S=n(90),D=n(342),F=n(71),I=n(125),N=["q"],J=function(t){return{page:t.page,page_size:t.perPage}},A=function(t){var e=t.q,n=Object(D.a)(t,N);return Object(a.a)(Object(a.a)({},n),{},{search:e})},C=function(t){var e=t.field,n=t.order;return{ordering:"".concat("ASC"===n?"":"-").concat(e)}},L=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.a.fetchJson,n=function(n,a){return e("".concat(t,"/").concat(n,"/").concat(a,"/")).then((function(t){return t.json}))};return{getList:function(){var n=Object(S.a)(E.a.mark((function n(r,c){var o,s,i,u;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=Object(a.a)(Object(a.a)(Object(a.a)({},A(c.filter)),J(c.pagination)),C(c.sort)),s="".concat(t,"/").concat(r,"/?").concat(Object(F.stringify)(o)),n.next=4,e(s);case 4:return i=n.sent,u=i.json,n.abrupt("return",{data:u.results,total:u.count});case 7:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),getOne:function(){var t=Object(S.a)(E.a.mark((function t(e,a){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(e,a.id);case 2:return r=t.sent,t.abrupt("return",{data:r});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),getMany:function(t,e){return Promise.all(e.ids.map((function(e){return n(t,e)}))).then((function(t){return{data:t}}))},getManyReference:function(){var n=Object(S.a)(E.a.mark((function n(r,c){var o,s,i,u;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},A(c.filter)),J(c.pagination)),C(c.sort)),{},Object(P.a)({},c.target,c.id)),s="".concat(t,"/").concat(r,"/?").concat(Object(F.stringify)(o)),n.next=4,e(s);case 4:return i=n.sent,u=i.json,n.abrupt("return",{data:u.results,total:u.count});case 7:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),update:function(){var n=Object(S.a)(E.a.mark((function n(a,r){var c,o,s,i;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(r),c=new FormData,Object.keys(r.data).forEach((function(t){"picture"===t?Object.keys(r.data.picture).includes("rawFile")&&(c.append(t,r.data[t].rawFile),console.log("hear")):c.append(t,r.data[t])})),(o=new Headers).append("enctype","multipart/form-data"),n.next=7,e("".concat(t,"/").concat(a,"/").concat(r.id,"/"),{method:"PUT",headers:o,body:c});case 7:return s=n.sent,i=s.json,n.abrupt("return",{data:i});case 10:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),updateMany:function(n,a){return Promise.all(a.ids.map((function(r){return e("".concat(t,"/").concat(n,"/").concat(r,"/"),{method:"PATCH",body:JSON.stringify(a.data)})}))).then((function(t){return{data:t.map((function(t){return t.json.id}))}}))},create:function(){var n=Object(S.a)(E.a.mark((function n(r,c){var o,s,i,u;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=new FormData,s=new Headers,Object.keys(c.data).forEach((function(t){Object.keys(c.data[t]).includes("rawFile")?o.append(t,c.data[t].rawFile):o.append(t,c.data[t])})),s.append("enctype","multipart/form-data"),n.next=6,e("".concat(t,"/").concat(r,"/"),{method:"POST",headers:s,body:o});case 6:return i=n.sent,u=i.json,n.abrupt("return",{data:Object(a.a)({},u)});case 9:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),delete:function(n,a){return e("".concat(t,"/").concat(n,"/").concat(a.id,"/"),{method:"DELETE"}).then((function(){return{data:a.previousData}}))},deleteMany:function(n,a){return Promise.all(a.ids.map((function(a){return e("".concat(t,"/").concat(n,"/").concat(a,"/"),{method:"DELETE"})}))).then((function(t){return{data:t.map((function(t){return t.json.id}))}}))}}},M="http://localhost:8000/api-token-auth/",_="http://localhost:8000/apiv1";var H=n(223),R=n(32),q=n(183),U=n(16),z=y.a,B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(a.a)({obtainAuthTokenUrl:M},t);return{login:function(){var t=Object(S.a)(E.a.mark((function t(n){var a,r,c,o,s,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.username,r=n.password,c=new Request(e.obtainAuthTokenUrl,{method:"POST",body:JSON.stringify({username:a,password:r}),headers:new Headers({"Content-Type":"application/json"})}),t.next=4,fetch(c);case 4:if(!(o=t.sent).ok){t.next=12;break}return t.t0=localStorage,t.next=9,o.json();case 9:return t.t1=t.sent.token,t.t0.setItem.call(t.t0,"token",t.t1),t.abrupt("return");case 12:if("application/json"===o.headers.get("content-type")){t.next=14;break}throw new Error(o.statusText);case 14:return t.next=16,o.json();case 16:throw s=t.sent,i=s.non_field_errors,new Error(i||o.statusText);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),logout:function(){return localStorage.removeItem("token"),Promise.resolve()},checkAuth:function(){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},checkError:function(t){var e=t.status;return 401===e||403===e?(localStorage.removeItem("token"),Promise.reject()):Promise.resolve()},getPermissions:function(){return Promise.resolve()}}}(),W=L(_,(function(t,e){return I.a.fetchJson(t,Object.assign(function(){var t=localStorage.getItem("token");return t?{user:{authenticated:!0,token:"Token "+t}}:{}}(),e))})),G=Object(q.a)({root:{maxWidth:345},media:{height:140}});Object(r.render)(Object(U.jsx)(c.a,{authProvider:B,dataProvider:W,children:function(t){return[Object(U.jsx)(o.a,{name:"post",list:K,edit:X,create:Y,icon:z})]}}),document.getElementById("root"));var K=function(t){return Object(U.jsx)(u.a,Object(a.a)(Object(a.a)({},t),{},{children:Object(U.jsxs)(d.a,{children:[Object(U.jsx)(l.a,{source:"id"}),Object(U.jsx)(l.a,{source:"title"}),Object(U.jsx)(j.a,{basePath:"/post"})]})}))},Q=function(t){var e=t.record;return Object(U.jsxs)("span",{children:["Post ",e?'"'.concat(e.title,'"'):""]})},V=function(){var t=Object(R.f)(),e=G();return Object(U.jsxs)(m.a,{children:[Object(U.jsx)(x.a,{style:{fontSize:"0.8rem",marginBottom:"10px"},className:"MuiFormLabel-root RaFileInput-root-78",children:"Last Picture"}),Object(U.jsx)(v.a,{className:e.root,children:Object(U.jsx)(g.a,{children:Object(U.jsx)(w.a,{className:e.media,image:t.values.picture,title:"Contemplative Reptile"})})})]})},X=function(t){return Object(U.jsx)(b.a,Object(a.a)(Object(a.a)({title:Object(U.jsx)(Q,{})},t),{},{children:Object(U.jsxs)(p.a,{children:[Object(U.jsx)(f.a,{disabled:!0,source:"id"}),Object(U.jsx)(f.a,{source:"title"}),Object(U.jsx)(f.a,{source:"tag"}),Object(U.jsx)(H.a,{source:"content",toolbar:[["bold","italic","underline","link"]]}),Object(U.jsx)(h.a,{source:"status",choices:[{id:"Published",name:"Published"},{id:"Draft",name:"Draft"},{id:"Trash",name:"Trash"}]}),Object(U.jsx)(f.a,{disabled:!0,label:"Nb views",source:"view"}),Object(U.jsx)(V,{}),Object(U.jsx)(s.a,{source:"picture",accept:"image/*",children:Object(U.jsx)(i.a,{source:"src",title:"title"})})]})}))},Y=function(t){return Object(U.jsx)(O.a,Object(a.a)(Object(a.a)({title:"Create a Post"},t),{},{children:Object(U.jsxs)(p.a,{children:[Object(U.jsx)(f.a,{source:"title"}),Object(U.jsx)(f.a,{source:"tag"}),Object(U.jsx)(H.a,{source:"content",toolbar:[["bold","italic","underline","link"]]}),Object(U.jsx)(h.a,{source:"status",choices:[{id:"Published",name:"Published"},{id:"Draft",name:"Draft"},{id:"Trash",name:"Trash"}]}),Object(U.jsx)(f.a,{disabled:!0,label:"Nb views",source:"view"}),Object(U.jsx)(s.a,{source:"picture",accept:"image/*",children:Object(U.jsx)(i.a,{source:"src",title:"title"})})]})}))}}},[[549,1,2]]]);
//# sourceMappingURL=main.3c25e8ab.chunk.js.map